<head>
    <meta charset='utf-8'>
    <title>QUIESTCE</title>
    <link rel='stylesheet' type='text/css' href='style/style.css'>
    <script src='https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js'></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Ubuntu:ital,wght@0,300;0,400;0,500;0,700;1,300;1,400;1,500;1,700&display=swap" rel="stylesheet">



</head>
<body>
    <script src="fonctions.js"></script>
    <img src="images/logos/logo.png" alt="titre" id="logo">
    <div id="accueil">
        <h3>Devinez le personnage d'inazuma d'aujourd'hui !</h3>
        <div id="indices">
            <div class="indice" id="indiceApparition">
                <img src="images/logos/tv.png" alt="tv" class="logoIndice">
                <p>Indice de première apparition dans X essais</p>
                <p style="display: none">Saison 1 épisode 1</p>
            </div>
            <div class="indice" id="indiceMaillot">
                <img src="images/logos/livre.png" alt="livre" class="logoIndice">
                <p>Indice de description dans X essais</p>
                <p style="display: none">Numéro 0</p>
            </div>
        </div>
    </div>
    <div id="racine">
        <div id='formulaire'>
            <label for="guess"></label>
            <input type='text' name='guess' id='guess' placeholder='Nom de personnage, alias'
                   onkeyup='afficherPersos()'>
            <div id="divFleche" onclick='afficheComparaison(document.getElementById("guess").value)'>
                <img src="images/logos/fleche.png" id="fleche" alt="envoie" >
            </div>
        </div>
    </div>
    <script>
        let text = document.getElementById('guess')
        text.addEventListener('keydown',reaction)
        function reaction(e){
            if (e.code==="ArrowDown" || e.code==="ArrowUp"){
                e.preventDefault();
            }
            if (e.code==="Enter"){
                let selected  = document.getElementsByClassName('selected')[0]
                if (selected){
                    afficheComparaison(selected.id)
                }
            }
        }

    </script>
    <div style="overflow-x: auto;">
    <table id="comp">
        <tr>
            <th>Perso</th>
            <th>Genre</th>
            <th>Equipes</th>
            <th>Poste</th>
            <th>Element</th>
            <th>Origine</th>
            <th>Classe</th>
            <th>Apparition</th>
        </tr>
    </table>
    </div>


    <script>
        let body = document.getElementsByTagName('body')[0];
        body.addEventListener("keyup",parcourir);

        function parcourir(e){
            let table = document.getElementById('table_carte');
            if (table && table.rows.length>=2 ){
                let index;
                let td = document.getElementsByClassName('selected')[0];
                if (e.code==="ArrowDown" || e.code==="ArrowUp"){
                    if (e.code==="ArrowDown"){
                        index = (td.parentElement.rowIndex+1)%table.rows.length

                    }
                    else{
                        index = td.parentElement.rowIndex-1
                        if (index<0){
                            index = table.rows.length+index
                        }

                    }
                    let newSelected = table.rows[index % table.rows.length].children[0]
                    td.classList.remove('selected')
                    newSelected.classList.add('selected')
                }

            }

        }
    </script>
</body>